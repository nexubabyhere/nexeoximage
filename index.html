<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXEO API DASHBOARD v4.2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #38bdf8;
            --primary-dark: #0ea5e9;
            --secondary: #8b5cf6;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --bg-dark: #020617;
            --bg-card: rgba(15, 23, 42, 0.7);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
        }

        /* Light Theme */
        .theme-light {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --secondary: #7c3aed;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --bg-dark: #f8fafc;
            --bg-card: rgba(255, 255, 255, 0.9);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        /* Neon Red Theme */
        .theme-neon-red {
            --primary: #ff0000;
            --primary-dark: #cc0000;
            --secondary: #ff3333;
            --accent: #ff6666;
            --success: #00ff00;
            --danger: #ff0000;
            --bg-dark: #0a0a0a;
            --bg-card: rgba(20, 0, 0, 0.8);
            --text-primary: #ffffff;
            --text-secondary: #ff9999;
        }

        /* Neon Black Theme */
        .theme-neon-black {
            --primary: #00ffff;
            --primary-dark: #00cccc;
            --secondary: #ff00ff;
            --accent: #ffff00;
            --success: #00ff00;
            --danger: #ff0000;
            --bg-dark: #000000;
            --bg-card: rgba(10, 10, 10, 0.9);
            --text-primary: #ffffff;
            --text-secondary: #00ffff;
        }

        /* Neon Hacker Theme */
        .theme-neon-hacker {
            --primary: #00ff00;
            --primary-dark: #00cc00;
            --secondary: #00ff00;
            --accent: #00ff00;
            --success: #00ff00;
            --danger: #ff0000;
            --bg-dark: #000000;
            --bg-card: rgba(0, 20, 0, 0.9);
            --text-primary: #00ff00;
            --text-secondary: #00cc00;
        }

        /* Neon Anime Theme */
        .theme-neon-anime {
            --primary: #ff6bcb;
            --primary-dark: #ff4db8;
            --secondary: #6b8cff;
            --accent: #ffcc00;
            --success: #00ff88;
            --danger: #ff3366;
            --bg-dark: #0a0a1a;
            --bg-card: rgba(20, 10, 30, 0.9);
            --text-primary: #ffffff;
            --text-secondary: #ffccff;
        }

        /* Neon Blue Theme */
        .theme-neon-blue {
            --primary: #00ccff;
            --primary-dark: #0099cc;
            --secondary: #0066ff;
            --accent: #00ffff;
            --success: #00ffcc;
            --danger: #ff3366;
            --bg-dark: #000a1a;
            --bg-card: rgba(0, 20, 40, 0.9);
            --text-primary: #ffffff;
            --text-secondary: #66ffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Plus Jakarta Sans', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Theme-specific background patterns */
        .theme-default {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(56, 189, 248, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(139, 92, 246, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(245, 158, 11, 0.03) 0%, transparent 20%);
        }

        .theme-light {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(124, 58, 237, 0.1) 0%, transparent 20%);
        }

        .theme-neon-red {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(255, 0, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(255, 51, 51, 0.1) 0%, transparent 20%);
        }

        .theme-neon-black {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(0, 255, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(255, 0, 255, 0.1) 0%, transparent 20%);
        }

        .theme-neon-hacker {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(0, 255, 0, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(0, 255, 0, 0.05) 0%, transparent 20%);
        }

        .theme-neon-anime {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(255, 107, 203, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(107, 140, 255, 0.1) 0%, transparent 20%);
        }

        .theme-neon-blue {
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(0, 204, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 85% 30%, rgba(0, 102, 255, 0.1) 0%, transparent 20%);
        }

        .glass-panel {
            background: var(--bg-card);
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.36), 
                        inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
        }

        .nav-lines {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 2rem;
            padding: 12px;
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-line {
            flex: 1;
            height: 6px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
        }

        .nav-line.active {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            box-shadow: 0 0 15px var(--primary);
            transform: scaleY(1.5);
        }

        .nav-label-top {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            white-space: nowrap;
            transition: all 0.3s;
        }

        .nav-line.active .nav-label-top {
            color: var(--primary);
        }

        .nav-menu {
            position: relative;
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 2rem;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 14px;
        }

        .nav-item.active {
            background: rgba(var(--primary-rgb, 56, 189, 248), 0.1);
            color: var(--primary);
            border: 1px solid rgba(var(--primary-rgb, 56, 189, 248), 0.2);
        }

        .content-section { 
            display: none; 
            animation: fadeIn 0.5s ease; 
        }
        
        .content-section.active { 
            display: block; 
        }
        
        @keyframes fadeIn { 
            from { 
                opacity: 0; 
                transform: translateY(10px); 
            } 
            to { 
                opacity: 1; 
                transform: translateY(0); 
            } 
        }

        .custom-loader {
            width: 50px; 
            height: 50px; 
            border-radius: 50%;
            background: conic-gradient(transparent, var(--primary));
            -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 8px), #000 0);
            animation: spin 1.2s linear infinite;
        }
        
        @keyframes spin { 
            0% { 
                transform: rotate(0deg); 
            } 
            100% { 
                transform: rotate(360deg); 
            } 
        }

        .progress-bar { 
            height: 6px; 
            background: rgba(255, 255, 255, 0.1); 
            border-radius: 3px; 
            overflow: hidden; 
        }
        
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, var(--primary), var(--secondary)); 
            width: 0%; 
            transition: width 0.3s ease; 
        }

        .toast {
            position: fixed; 
            top: 30px; 
            right: 30px; 
            padding: 16px 24px;
            background: var(--bg-card); 
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px; 
            transform: translateX(120%); 
            transition: transform 0.4s ease; 
            z-index: 1000;
        }
        
        .toast.show { 
            transform: translateX(0); 
        }
        
        .toast.success { 
            border-left: 4px solid var(--success); 
        }
        
        .toast.error { 
            border-left: 4px solid var(--danger); 
        }

        .image-display { 
            max-height: 500px; 
            width: auto; 
            max-width: 100%; 
            object-fit: contain; 
            border-radius: 16px; 
            border: 2px solid rgba(var(--primary-rgb, 56, 189, 248), 0.2); 
        }
        
        .nexeo-input { 
            background: rgba(255, 255, 255, 0.05); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
            border-radius: 16px; 
            padding: 16px 20px; 
            color: var(--text-primary); 
            outline: none;
            transition: all 0.3s ease;
        }
        
        .nexeo-input:focus { 
            border-color: var(--primary); 
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb, 56, 189, 248), 0.1);
        }
        
        .nexeo-btn { 
            background: linear-gradient(135deg, var(--primary), var(--primary-dark)); 
            color: white; 
            border-radius: 16px; 
            padding: 16px 32px; 
            font-weight: 600; 
            cursor: pointer; 
            transition: all 0.3s ease;
            border: none;
            outline: none;
        }
        
        .nexeo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(var(--primary-rgb, 56, 189, 248), 0.3);
        }
        
        .nexeo-btn:active {
            transform: translateY(0);
        }
        
        .nexeo-btn-secondary { 
            background: linear-gradient(135deg, var(--secondary), color-mix(in srgb, var(--secondary) 80%, black)); 
            color: white; 
            border-radius: 16px; 
            padding: 16px 32px; 
            font-weight: 600; 
            cursor: pointer;
            border: none;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .nexeo-btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(var(--secondary-rgb, 139, 92, 246), 0.3);
        }
        
        .stats-card { 
            background: rgba(var(--primary-rgb, 56, 189, 248), 0.05); 
            border: 1px solid rgba(255, 255, 255, 0.05); 
            border-radius: 20px; 
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .stats-card:hover {
            transform: translateY(-4px);
            border-color: rgba(var(--primary-rgb, 56, 189, 248), 0.2);
        }
        
        .upload-area {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-area:hover {
            border-color: var(--primary);
            transform: scale(1.02);
        }
        
        .upload-area.dragover {
            border-color: var(--primary);
            background: rgba(var(--primary-rgb, 56, 189, 248), 0.05);
        }
        
        .loading-pulse {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .history-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .history-item:hover {
            background: rgba(var(--primary-rgb, 56, 189, 248), 0.1);
            transform: translateX(5px);
        }

        /* Theme selector styles */
        .theme-selector {
            position: relative;
        }

        .theme-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            min-width: 200px;
            z-index: 1000;
        }

        .theme-dropdown.show {
            display: grid;
        }

        .theme-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .theme-option:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .theme-option.active {
            background: rgba(var(--primary-rgb, 56, 189, 248), 0.1);
            border: 1px solid rgba(var(--primary-rgb, 56, 189, 248), 0.3);
        }

        .theme-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .theme-name {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Theme-specific color indicators */
        .theme-default .theme-color {
            background: linear-gradient(45deg, #38bdf8, #8b5cf6);
        }

        .theme-light .theme-color {
            background: linear-gradient(45deg, #3b82f6, #7c3aed);
        }

        .theme-neon-red .theme-color {
            background: linear-gradient(45deg, #ff0000, #ff3333);
        }

        .theme-neon-black .theme-color {
            background: linear-gradient(45deg, #00ffff, #ff00ff);
        }

        .theme-neon-hacker .theme-color {
            background: #00ff00;
        }

        .theme-neon-anime .theme-color {
            background: linear-gradient(45deg, #ff6bcb, #6b8cff);
        }

        .theme-neon-blue .theme-color {
            background: linear-gradient(45deg, #00ccff, #0066ff);
        }

        /* Text glow for neon themes */
        .theme-neon-red .text-primary-glow {
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
        }

        .theme-neon-black .text-primary-glow {
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
        }

        .theme-neon-hacker .text-primary-glow {
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
        }

        .theme-neon-anime .text-primary-glow {
            text-shadow: 0 0 10px rgba(255, 107, 203, 0.7);
        }

        .theme-neon-blue .text-primary-glow {
            text-shadow: 0 0 10px rgba(0, 204, 255, 0.7);
        }

        /* API method tag */
        .api-method-tag {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 12px;
            background: rgba(var(--primary-rgb, 56, 189, 248), 0.2);
            color: var(--primary);
            font-weight: 600;
        }
    </style>
</head>
<body class="theme-default" onload="initializeDashboard()">

    <nav class="sticky top-0 z-50 glass-panel px-6 py-4 flex justify-between items-center border-b border-white/5 mb-8">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-sky-400 to-indigo-500 flex items-center justify-center loading-pulse">
                <i class="fas fa-bolt text-white text-lg"></i>
            </div>
            <div>
                <h1 class="text-2xl font-extrabold tracking-tighter text-primary-glow">NEXEO API</h1>
                <p class="text-xs text-slate-500">Dashboard v4.2</p>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <div id="status-indicator" class="flex items-center gap-2 bg-slate-900/80 px-4 py-2 rounded-xl border border-slate-800">
                <div class="w-2 h-2 rounded-full bg-slate-500" id="status-dot"></div>
                <span class="text-[10px] uppercase font-bold text-slate-400" id="status-text">Connecting...</span>
            </div>
            <div class="theme-selector">
                <button onclick="toggleThemeDropdown()" class="w-10 h-10 rounded-xl bg-slate-900/80 border border-slate-800 flex items-center justify-center hover:bg-slate-800/80 transition-all">
                    <i class="fas fa-palette"></i>
                </button>
                <div class="theme-dropdown" id="themeDropdown">
                    <div class="theme-option active" onclick="changeTheme('default')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Default</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('light')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Light</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('neon-red')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Neon Red</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('neon-black')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Neon Black</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('neon-hacker')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Hacker</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('neon-anime')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Anime</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('neon-blue')">
                        <div class="theme-color"></div>
                        <span class="theme-name">Neon Blue</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4">
        <div class="nav-lines">
            <div class="nav-line active" onclick="switchSection('image-gen')">
                <span class="nav-label-top">Generation</span>
            </div>
            <div class="nav-line" onclick="switchSection('ocr-reader')">
                <span class="nav-label-top">OCR Reader</span>
            </div>
            <div class="nav-line" onclick="switchSection('tools')">
                <span class="nav-label-top">Tools</span>
            </div>
        </div>

        <div class="nav-menu">
            <div class="nav-item active" onclick="switchSection('image-gen')">
                <i class="fas fa-wand-magic-sparkles mr-2"></i>AI Generator
            </div>
            <div class="nav-item" onclick="switchSection('ocr-reader')">
                <i class="fas fa-eye mr-2"></i>Text Reader
            </div>
            <div class="nav-item" onclick="switchSection('tools')">
                <i class="fas fa-tools mr-2"></i>Settings
            </div>
        </div>

        <!-- Image Generation Section -->
        <section id="image-gen-section" class="content-section active glass-panel p-8 rounded-[2.5rem]">
            <div class="mb-8">
                <h2 class="text-3xl font-extrabold mb-2 text-primary-glow">AI Image Generator</h2>
                <p class="text-slate-400 text-sm">Create masterpieces in seconds.</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="md:col-span-2">
                    <div class="space-y-4">
                        <div>
                            <label class="text-sm text-slate-400 mb-2 block">Prompt</label>
                            <div class="relative">
                                <input id="promptInput" type="text" placeholder="Describe your image in detail..." 
                                       class="nexeo-input w-full pr-12" onkeypress="handlePromptKeyPress(event)">
                                <button onclick="clearPrompt()" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-500 hover:text-white transition-colors">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="flex justify-between mt-2">
                                <span class="text-xs text-slate-500" id="prompt-length">0/200</span>
                                <button onclick="suggestPrompt()" class="text-xs text-sky-400 hover:text-sky-300 transition-colors">
                                    <i class="fas fa-lightbulb mr-1"></i>Suggest
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-sm text-slate-400 mb-2 block">Style</label>
                                <select id="styleSelect" class="nexeo-input w-full">
                                    <option value="realistic">Realistic</option>
                                    <option value="anime">Anime</option>
                                    <option value="fantasy">Fantasy</option>
                                    <option value="cyberpunk">Cyberpunk</option>
                                    <option value="minimal">Minimal</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-slate-400 mb-2 block">Quality</label>
                                <select id="qualitySelect" class="nexeo-input w-full">
                                    <option value="standard">Standard</option>
                                    <option value="hd">HD</option>
                                    <option value="ultra">Ultra HD</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex flex-col justify-end">
                    <button onclick="handleImageGen()" id="genBtn" class="nexeo-btn h-full flex items-center justify-center gap-2">
                        <i class="fas fa-wand-magic-sparkles"></i>
                        Generate Image
                    </button>
                    <p class="text-xs text-slate-500 text-center mt-2">Estimated time: 35s</p>
                </div>
            </div>

            <div id="gen-loader" class="hidden glass-panel p-8 rounded-3xl text-center mb-6">
                <div class="custom-loader mx-auto mb-4"></div>
                <p class="text-xl font-bold mb-2" id="progress-text">Initializing...</p>
                <div class="progress-bar max-w-md mx-auto mt-4">
                    <div id="progress-bar" class="progress-fill"></div>
                </div>
                <p class="mt-4 text-sm text-slate-500">
                    <i class="fas fa-clock mr-2"></i>Estimated time: <span id="timer">35</span>s
                </p>
            </div>

            <div id="gen-result-container" class="hidden glass-panel p-6 rounded-3xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-primary-glow">Generated Image</h3>
                    <div class="flex gap-2">
                        <button onclick="regenerateImage()" class="px-4 py-2 rounded-xl bg-slate-800 hover:bg-slate-700 transition-colors">
                            <i class="fas fa-redo mr-2"></i>Regenerate
                        </button>
                        <button onclick="downloadImage()" class="px-4 py-2 rounded-xl bg-green-600 hover:bg-green-700 transition-colors">
                            <i class="fas fa-download mr-2"></i>Download
                        </button>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <img id="genResultImg" class="image-display w-full" src="" alt="Generated Image">
                    <div>
                        <h4 class="font-bold mb-2">Image Details</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-slate-400">Prompt:</span>
                                <span id="prompt-used" class="text-right max-w-xs"></span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-400">Style:</span>
                                <span id="style-used"></span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-400">Quality:</span>
                                <span id="quality-used"></span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-slate-400">Generated:</span>
                                <span id="gen-time"></span>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="font-bold mb-2">Quick Actions</h4>
                            <div class="flex flex-wrap gap-2">
                                <button onclick="copyImageURL()" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors text-sm">
                                    <i class="fas fa-copy mr-1"></i>Copy URL
                                </button>
                                <button onclick="shareImage()" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors text-sm">
                                    <i class="fas fa-share mr-1"></i>Share
                                </button>
                                <button onclick="analyzeImageWithOCR()" class="px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors text-sm">
                                    <i class="fas fa-search mr-1"></i>Analyze Text
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generation History -->
            <div id="history-section" class="mt-8">
                <h3 class="text-lg font-bold mb-4 text-primary-glow">Recent Generations</h3>
                <div id="history-list" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- History items will be dynamically added here -->
                </div>
            </div>
        </section>

        <!-- OCR Reader Section -->
        <section id="ocr-reader-section" class="content-section glass-panel p-8 rounded-[2.5rem]">
            <div class="mb-8">
                <h2 class="text-3xl font-extrabold mb-2 text-primary-glow">OCR Text Reader</h2>
                <p class="text-slate-400 text-sm">Extract text from images with high accuracy.</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="space-y-4">
                    <div>
                        <label class="text-sm text-slate-400 mb-2 block">Image URL</label>
                        <div class="relative">
                            <input id="ocrLinkInput" type="text" placeholder="Paste image URL or enter base64 data..." 
                                   class="nexeo-input w-full pr-12">
                            <button onclick="clearOCRInput()" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-500 hover:text-white transition-colors">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <p class="text-xs text-slate-500 mt-2">Supports JPG, PNG, GIF, BMP formats</p>
                    </div>
                    
                    <button onclick="handleOCR()" id="ocrBtn" class="nexeo-btn-secondary w-full flex items-center justify-center gap-2">
                        <i class="fas fa-search"></i>
                        Extract Text
                    </button>
                </div>
                
                <div id="upload-area" class="upload-area glass-panel p-8 rounded-3xl text-center border-dashed border-2 border-slate-700 flex flex-col items-center justify-center min-h-[200px]">
                    <i class="fas fa-cloud-upload-alt text-4xl mb-4 text-slate-500"></i>
                    <p class="mb-2">Drag & drop image here</p>
                    <p class="text-sm text-slate-500 mb-4">or</p>
                    <label class="nexeo-btn px-6 py-3 cursor-pointer">
                        <i class="fas fa-folder-open mr-2"></i>
                        Browse Files
                        <input type="file" id="fileInput" class="hidden" accept="image/*" onchange="handleFileUpload(this)">
                    </label>
                    <p class="text-xs text-slate-500 mt-4">Max file size: 10MB</p>
                </div>
            </div>

            <div id="ocr-preview-container" class="hidden glass-panel p-6 rounded-3xl mb-6">
                <h3 class="text-lg font-bold mb-4 text-primary-glow">Image Preview</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="flex items-center justify-center">
                        <img id="ocrPreviewImg" class="max-h-64 rounded-xl" src="" alt="OCR Preview">
                    </div>
                    <div class="text-sm text-slate-400 space-y-2">
                        <div class="flex justify-between">
                            <span>File Type:</span>
                            <span id="file-type"></span>
                        </div>
                        <div class="flex justify-between">
                            <span>File Size:</span>
                            <span id="file-size"></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Dimensions:</span>
                            <span id="file-dimensions"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="ocr-loader" class="hidden glass-panel p-8 rounded-3xl text-center mb-6">
                <div class="custom-loader mx-auto mb-4"></div>
                <p class="text-xl font-bold mb-2">Processing Image...</p>
                <p class="text-sm text-slate-500">Extracting text with high accuracy OCR</p>
            </div>

            <div id="ocr-result-box" class="hidden glass-panel p-6 rounded-3xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-bold text-primary-glow">Extracted Text</h3>
                    <div class="flex gap-2">
                        <button onclick="clearOCRResult()" class="px-3 py-1 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors text-sm">
                            <i class="fas fa-times mr-1"></i>Clear
                        </button>
                        <button onclick="copyOcrText()" class="px-3 py-1 rounded-lg bg-sky-600 hover:bg-sky-700 transition-colors text-sm">
                            <i class="fas fa-copy mr-1"></i>Copy
                        </button>
                    </div>
                </div>
                
                <div class="bg-slate-900/50 p-6 rounded-2xl border border-slate-800 mb-4">
                    <div id="ocrTextOutput" class="font-mono text-sm whitespace-pre-wrap max-h-96 overflow-y-auto"></div>
                </div>
                
                <div class="flex flex-wrap gap-3">
                    <button onclick="copyOcrText()" class="nexeo-btn py-2 flex-1 min-w-[120px]">
                        <i class="fas fa-copy mr-2"></i>Copy Text
                    </button>
                    <button onclick="speakText()" class="nexeo-btn-secondary py-2 flex-1 min-w-[120px]">
                        <i class="fas fa-volume-up mr-2"></i>Speak Text
                    </button>
                    <button onclick="translateText()" class="px-4 py-2 rounded-xl bg-slate-800 hover:bg-slate-700 transition-colors flex-1 min-w-[120px]">
                        <i class="fas fa-language mr-2"></i>Translate
                    </button>
                    <button onclick="saveTextAsFile()" class="px-4 py-2 rounded-xl bg-slate-800 hover:bg-slate-700 transition-colors flex-1 min-w-[120px]">
                        <i class="fas fa-save mr-2"></i>Save as TXT
                    </button>
                </div>
                
                <div class="mt-6 grid md:grid-cols-3 gap-4">
                    <div class="stats-card text-center">
                        <p class="text-slate-400 text-xs">Characters</p>
                        <h3 class="text-2xl font-bold" id="char-count">0</h3>
                    </div>
                    <div class="stats-card text-center">
                        <p class="text-slate-400 text-xs">Words</p>
                        <h3 class="text-2xl font-bold" id="word-count">0</h3>
                    </div>
                    <div class="stats-card text-center">
                        <p class="text-slate-400 text-xs">Confidence</p>
                        <h3 class="text-2xl font-bold text-green-400" id="confidence-score">High</h3>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tools Section -->
        <section id="tools-section" class="content-section glass-panel p-8 rounded-[2.5rem]">
            <div class="mb-8">
                <h2 class="text-3xl font-extrabold mb-2 text-primary-glow">Tools & Statistics</h2>
                <p class="text-slate-400 text-sm">Monitor usage and configure settings</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="stats-card">
                    <div class="flex justify-between items-center mb-2">
                        <p class="text-slate-400 text-xs">Images Created</p>
                        <i class="fas fa-image text-sky-400"></i>
                    </div>
                    <h3 class="text-3xl font-bold" id="stats-image-count">0</h3>
                    <div class="w-full bg-slate-800 h-2 rounded-full mt-2 overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-sky-400 to-indigo-500" style="width: 0%" id="image-progress"></div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="flex justify-between items-center mb-2">
                        <p class="text-slate-400 text-xs">OCR Scans</p>
                        <i class="fas fa-search text-purple-400"></i>
                    </div>
                    <h3 class="text-3xl font-bold" id="stats-ocr-count">0</h3>
                    <div class="w-full bg-slate-800 h-2 rounded-full mt-2 overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-purple-400 to-pink-500" style="width: 0%" id="ocr-progress"></div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="flex justify-between items-center mb-2">
                        <p class="text-slate-400 text-xs">API Status</p>
                        <i class="fas fa-server text-green-400"></i>
                    </div>
                    <h3 class="text-3xl font-bold text-green-400" id="api-status">Online</h3>
                    <p class="text-xs text-slate-500 mt-2" id="api-latency">Latency: -- ms</p>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="glass-panel p-6 rounded-3xl">
                    <h3 class="text-lg font-bold mb-4 text-primary-glow">API Configuration</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="text-sm text-slate-400 mb-2 block">API Endpoint</label>
                            <input id="apiEndpoint" type="text" value="https://nexeoimage.vercel.app" 
                                   class="nexeo-input w-full">
                        </div>
                        <div class="flex gap-3">
                            <button onclick="testAPI()" class="flex-1 nexeo-btn py-3">
                                <i class="fas fa-plug mr-2"></i>Test Connection
                            </button>
                            <button onclick="resetAPI()" class="flex-1 px-4 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 transition-colors">
                                <i class="fas fa-undo mr-2"></i>Reset
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="glass-panel p-6 rounded-3xl">
                    <h3 class="text-lg font-bold mb-4 text-primary-glow">Quick Actions</h3>
                    <div class="space-y-3">
                        <button onclick="clearAllData()" class="w-full px-4 py-3 rounded-xl bg-red-600/20 hover:bg-red-600/30 transition-colors text-red-400 flex items-center justify-between">
                            <span><i class="fas fa-trash mr-2"></i>Clear All Data</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button onclick="exportData()" class="w-full px-4 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 transition-colors flex items-center justify-between">
                            <span><i class="fas fa-download mr-2"></i>Export Data</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button onclick="toggleAdvancedMode()" class="w-full px-4 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 transition-colors flex items-center justify-between">
                            <span><i class="fas fa-cogs mr-2"></i>Advanced Mode</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="glass-panel p-6 rounded-3xl">
                <h3 class="text-lg font-bold mb-4 text-primary-glow">Recent Activity</h3>
                <div id="activity-log" class="space-y-3 max-h-64 overflow-y-auto">
                    <!-- Activity logs will appear here -->
                </div>
            </div>
        </section>
    </div>

    <div id="toast-container" class="fixed top-8 right-8 z-[1000] space-y-3"></div>

    <script>
        // Configuration
        const BASE_URL = "https://nexeoimage.vercel.app";
        let imageCount = 0;
        let ocrCount = 0;
        let generationHistory = [];
        let activityLog = [];
        let currentImageData = null;
        let currentOCRData = null;

        // Initialize Dashboard
        function initializeDashboard() {
            console.log("ðŸš€ NEXEO API Dashboard v4.2 Initializing...");
            
            // Load saved data
            loadSavedData();
            
            // Setup drag and drop
            setupDragAndDrop();
            
            // Test API connection
            testAPI();
            
            // Update prompt counter
            updatePromptCounter();
            
            // Add initial activity log
            logActivity("Dashboard initialized", "info");
            
            // Close theme dropdown when clicking outside
            document.addEventListener('click', function(event) {
                const themeDropdown = document.getElementById('themeDropdown');
                if (!event.target.closest('.theme-selector')) {
                    themeDropdown.classList.remove('show');
                }
            });
            
            console.log("âœ… Dashboard ready");
        }

        // Load saved data from localStorage
        function loadSavedData() {
            try {
                const savedImageCount = localStorage.getItem('nexeo_image_count');
                const savedOcrCount = localStorage.getItem('nexeo_ocr_count');
                const savedHistory = localStorage.getItem('nexeo_history');
                const savedActivity = localStorage.getItem('nexeo_activity');
                const savedTheme = localStorage.getItem('nexeo_theme');
                
                imageCount = savedImageCount ? parseInt(savedImageCount) : 0;
                ocrCount = savedOcrCount ? parseInt(savedOcrCount) : 0;
                generationHistory = savedHistory ? JSON.parse(savedHistory) : [];
                activityLog = savedActivity ? JSON.parse(savedActivity) : [];
                
                // Apply saved theme
                if (savedTheme) {
                    changeTheme(savedTheme, false);
                }
                
                updateStats();
                renderHistory();
                renderActivityLog();
            } catch (e) {
                console.error("Error loading saved data:", e);
            }
        }

        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('nexeo_image_count', imageCount.toString());
                localStorage.setItem('nexeo_ocr_count', ocrCount.toString());
                localStorage.setItem('nexeo_history', JSON.stringify(generationHistory));
                localStorage.setItem('nexeo_activity', JSON.stringify(activityLog));
            } catch (e) {
                console.error("Error saving data:", e);
            }
        }

        // Setup drag and drop for OCR
        function setupDragAndDrop() {
            const uploadArea = document.getElementById('upload-area');
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileUpload({ files: files });
                }
            });
        }

        // Switch between sections
        function switchSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.nav-line').forEach(l => l.classList.remove('active'));

            // Show selected section
            document.getElementById(sectionId + '-section').classList.add('active');
            
            // Update navigation
            const idx = sectionId === 'image-gen' ? 0 : sectionId === 'ocr-reader' ? 1 : 2;
            document.querySelectorAll('.nav-item')[idx].classList.add('active');
            document.querySelectorAll('.nav-line')[idx].classList.add('active');
            
            // Log activity
            logActivity(`Switched to ${sectionId.replace('-', ' ')}`, "navigation");
        }

        // Test API Connection
        async function testAPI() {
            const endpoint = document.getElementById('apiEndpoint').value || BASE_URL;
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');
            const apiStatus = document.getElementById('api-status');
            
            statusText.innerText = "Testing...";
            statusDot.className = "w-2 h-2 rounded-full bg-yellow-500 loading-pulse";
            
            try {
                const startTime = performance.now();
                const res = await fetch(`${endpoint}/apiv1/health`);
                const endTime = performance.now();
                const latency = Math.round(endTime - startTime);
                
                if (res.ok) {
                    statusDot.className = "w-2 h-2 rounded-full bg-green-500";
                    statusText.innerText = "Online";
                    apiStatus.innerText = "Online";
                    apiStatus.className = "text-3xl font-bold text-green-400";
                    document.getElementById('api-latency').innerText = `Latency: ${latency}ms`;
                    
                    showToast(`API Connected (${latency}ms)`, "success");
                    logActivity("API connection successful", "success");
                } else {
                    throw new Error("API returned non-OK status");
                }
            } catch (e) {
                statusDot.className = "w-2 h-2 rounded-full bg-red-500";
                statusText.innerText = "Offline";
                apiStatus.innerText = "Offline";
                apiStatus.className = "text-3xl font-bold text-red-400";
                document.getElementById('api-latency').innerText = "Latency: -- ms";
                
                showToast("API Connection Failed", "error");
                logActivity("API connection failed", "error");
            }
        }

        // Handle Image Generation
        async function handleImageGen() {
            const prompt = document.getElementById('promptInput').value.trim();
            if (!prompt) {
                showToast("Please enter a prompt", "error");
                document.getElementById('promptInput').focus();
                return;
            }

            const style = document.getElementById('styleSelect').value;
            const quality = document.getElementById('qualitySelect').value;
            const genBtn = document.getElementById('genBtn');
            const loader = document.getElementById('gen-loader');
            const result = document.getElementById('gen-result-container');
            
            // Disable button and show loader
            genBtn.disabled = true;
            genBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Generating...';
            loader.classList.remove('hidden');
            result.classList.add('hidden');
            
            // Clear any previous result
            document.getElementById('genResultImg').src = '';
            
            // Start timer simulation
            let time = 35;
            const timerElement = document.getElementById('timer');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            
            const timer = setInterval(() => {
                time--;
                timerElement.innerText = time;
                const progress = Math.min(100, ((35 - time) / 35) * 100);
                progressBar.style.width = `${progress}%`;
                progressText.innerText = `${Math.round(progress)}% - Generating...`;
                
                if (time <= 0) {
                    clearInterval(timer);
                    progressText.innerText = "Finalizing...";
                }
            }, 1000);

            try {
                // Prepare API request
                const endpoint = document.getElementById('apiEndpoint').value || BASE_URL;
                const apiUrl = `${endpoint}/apiv1/image?text=${encodeURIComponent(prompt)}&style=${style}&quality=${quality}`;
                
                console.log("ðŸ“¤ Making API request to:", apiUrl);
                
                // Make API call
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                console.log("ðŸ“¥ API Response:", data);
                
                clearInterval(timer);
                
                if (data.success && data.images && data.images[0]) {
                    // Display result
                    const imageUrl = data.images[0];
                    document.getElementById('genResultImg').src = imageUrl;
                    document.getElementById('prompt-used').innerText = prompt;
                    document.getElementById('style-used').innerText = style.charAt(0).toUpperCase() + style.slice(1);
                    document.getElementById('quality-used').innerText = quality.toUpperCase();
                    document.getElementById('gen-time').innerText = new Date().toLocaleTimeString();
                    
                    // Store current image data
                    currentImageData = {
                        prompt: prompt,
                        style: style,
                        quality: quality,
                        url: imageUrl,
                        timestamp: new Date().toISOString()
                    };
                    
                    // Add to history
                    generationHistory.unshift({
                        prompt: prompt,
                        url: imageUrl,
                        timestamp: new Date().toISOString(),
                        style: style
                    });
                    
                    // Keep only last 8 items
                    if (generationHistory.length > 8) {
                        generationHistory = generationHistory.slice(0, 8);
                    }
                    
                    // Update stats
                    imageCount++;
                    updateStats();
                    
                    // Render history
                    renderHistory();
                    
                    // Show result
                    loader.classList.add('hidden');
                    result.classList.remove('hidden');
                    
                    // Save data
                    saveData();
                    
                    // Log activity
                    logActivity(`Generated image: "${prompt.substring(0, 30)}..."`, "success");
                    
                    showToast("Image generated successfully!", "success");
                } else {
                    throw new Error("Invalid response from API");
                }
            } catch (error) {
                console.error("Generation error:", error);
                clearInterval(timer);
                loader.classList.add('hidden');
                showToast("Failed to generate image. Please try again.", "error");
                logActivity("Image generation failed", "error");
            } finally {
                // Reset button
                genBtn.disabled = false;
                genBtn.innerHTML = '<i class="fas fa-wand-magic-sparkles"></i> Generate Image';
            }
        }

        // Handle OCR Processing
        async function handleOCR() {
            const url = document.getElementById('ocrLinkInput').value.trim();
            
            if (!url) {
                showToast("Please enter an image URL", "error");
                return;
            }

            await performOCR(url);
        }

        // Perform OCR on image
        async function performOCR(source) {
            const ocrBtn = document.getElementById('ocrBtn');
            const ocrLoader = document.getElementById('ocr-loader');
            const ocrResult = document.getElementById('ocr-result-box');
            const previewContainer = document.getElementById('ocr-preview-container');
            
            // Reset and show loader
            ocrBtn.disabled = true;
            ocrBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
            ocrLoader.classList.remove('hidden');
            ocrResult.classList.add('hidden');
            previewContainer.classList.add('hidden');
            
            // Clear previous results
            document.getElementById('ocrTextOutput').innerText = '';
            
            try {
                const endpoint = document.getElementById('apiEndpoint').value || BASE_URL;
                let apiUrl;
                
                console.log("ðŸ” Performing OCR on source:", source.substring(0, 100) + "...");
                
                // Check if source is base64 or URL
                if (source.startsWith('data:image')) {
                    // Extract base64 part
                    const base64Data = source.split(',')[1];
                    apiUrl = `${endpoint}/apiv1/text?image=${encodeURIComponent(base64Data)}`;
                } else {
                    // URL encode the image URL
                    apiUrl = `${endpoint}/apiv1/text?image=${encodeURIComponent(source)}`;
                }
                
                console.log("ðŸ“¤ OCR API URL:", apiUrl);
                
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                console.log("ðŸ“¥ OCR Response:", data);
                
                if (data.success) {
                    // Store OCR data
                    currentOCRData = {
                        text: data.text,
                        source: source,
                        timestamp: new Date().toISOString()
                    };
                    
                    // Update UI
                    document.getElementById('ocrTextOutput').innerText = data.text;
                    
                    // Show preview if it's a URL or data URL
                    if (source.startsWith('http') || source.startsWith('data:image')) {
                        document.getElementById('ocrPreviewImg').src = source;
                        previewContainer.classList.remove('hidden');
                        
                        // Try to get image info
                        try {
                            const img = new Image();
                            img.onload = function() {
                                document.getElementById('file-dimensions').innerText = 
                                    `${this.width} Ã— ${this.height}px`;
                            };
                            img.src = source;
                        } catch (e) {
                            console.warn("Could not load image dimensions:", e);
                        }
                    }
                    
                    // Update stats
                    ocrCount++;
                    updateStats();
                    
                    // Calculate text statistics
                    const text = data.text || "";
                    const charCount = text.length;
                    const wordCount = text.trim().split(/\s+/).filter(word => word.length > 0).length;
                    
                    document.getElementById('char-count').innerText = charCount;
                    document.getElementById('word-count').innerText = wordCount;
                    
                    // Calculate confidence (simulated)
                    const confidence = Math.min(99, 85 + Math.floor(Math.random() * 15));
                    document.getElementById('confidence-score').innerText = `${confidence}%`;
                    
                    // Show result
                    ocrLoader.classList.add('hidden');
                    ocrResult.classList.remove('hidden');
                    
                    // Save data
                    saveData();
                    
                    // Log activity
                    logActivity(`OCR processed: ${wordCount} words extracted`, "success");
                    
                    showToast("Text extracted successfully!", "success");
                } else {
                    throw new Error("OCR failed - API returned success: false");
                }
            } catch (error) {
                console.error("OCR error:", error);
                ocrLoader.classList.add('hidden');
                
                // Check if it's a CORS error
                if (error.message.includes('Failed to fetch') || error.name === 'TypeError') {
                    showToast("CORS Error: Cannot access the image. Try uploading the image directly.", "error");
                } else {
                    showToast("Failed to extract text. Please check the image URL or try uploading the image.", "error");
                }
                
                logActivity("OCR processing failed", "error");
            } finally {
                // Reset button
                ocrBtn.disabled = false;
                ocrBtn.innerHTML = '<i class="fas fa-search"></i> Extract Text';
            }
        }

        // Handle file upload for OCR
        function handleFileUpload(input) {
            const file = input.files ? input.files[0] : input;
            
            if (!file) return;
            
            // Check file size (max 10MB)
            if (file.size > 10 * 1024 * 1024) {
                showToast("File size must be less than 10MB", "error");
                return;
            }
            
            // Check file type
            if (!file.type.match('image.*')) {
                showToast("Please select an image file", "error");
                return;
            }
            
            // Update file info
            document.getElementById('file-type').innerText = file.type;
            document.getElementById('file-size').innerText = formatFileSize(file.size);
            
            const reader = new FileReader();
            
            reader.onload = async (e) => {
                const base64 = e.target.result;
                
                // Update input field with base64 preview
                document.getElementById('ocrLinkInput').value = base64.substring(0, 100) + "...";
                
                // Perform OCR
                await performOCR(base64);
            };
            
            reader.onerror = () => {
                showToast("Error reading file", "error");
            };
            
            reader.readAsDataURL(file);
            
            // Log activity
            logActivity(`Uploaded file: ${file.name}`, "info");
        }

        // Copy image URL to clipboard - FIXED
        function copyImageURL() {
            if (!currentImageData || !currentImageData.url) {
                showToast("No image URL to copy", "error");
                return;
            }
            
            const imageUrl = currentImageData.url;
            
            // Create a temporary textarea to copy the URL
            const textarea = document.createElement('textarea');
            textarea.value = imageUrl;
            document.body.appendChild(textarea);
            textarea.select();
            textarea.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast("Image URL copied to clipboard!", "success");
                    logActivity("Image URL copied", "success");
                } else {
                    showToast("Failed to copy URL", "error");
                }
            } catch (err) {
                console.error('Copy failed:', err);
                showToast("Failed to copy URL", "error");
            }
            
            document.body.removeChild(textarea);
        }

        // Clear prompt input
        function clearPrompt() {
            document.getElementById('promptInput').value = '';
            updatePromptCounter();
            document.getElementById('promptInput').focus();
        }

        // Clear OCR input
        function clearOCRInput() {
            document.getElementById('ocrLinkInput').value = '';
            document.getElementById('ocr-preview-container').classList.add('hidden');
            document.getElementById('ocr-result-box').classList.add('hidden');
        }

        // Clear OCR result
        function clearOCRResult() {
            document.getElementById('ocrTextOutput').innerText = '';
            document.getElementById('ocr-result-box').classList.add('hidden');
            document.getElementById('ocr-preview-container').classList.add('hidden');
        }

        // Update prompt counter
        function updatePromptCounter() {
            const prompt = document.getElementById('promptInput').value;
            document.getElementById('prompt-length').innerText = `${prompt.length}/200`;
        }

        // Handle key press in prompt input
        function handlePromptKeyPress(e) {
            if (e.key === 'Enter') {
                handleImageGen();
            }
            updatePromptCounter();
        }

        // Suggest a prompt
        function suggestPrompt() {
            const prompts = [
                "A majestic dragon flying over a medieval castle at sunset",
                "Cyberpunk cityscape with neon lights and flying cars",
                "Underwater city with bioluminescent plants and creatures",
                "Futuristic space station orbiting a gas giant planet",
                "Magical forest with glowing mushrooms and fairy lights",
                "Steampunk airship flying through cloudy skies",
                "Ancient temple hidden in a misty jungle",
                "Surreal landscape with floating islands and waterfalls"
            ];
            
            const randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];
            document.getElementById('promptInput').value = randomPrompt;
            updatePromptCounter();
            document.getElementById('promptInput').focus();
            
            showToast("Prompt suggestion added!", "success");
        }

        // Update statistics display
        function updateStats() {
            document.getElementById('stats-image-count').innerText = imageCount;
            document.getElementById('stats-ocr-count').innerText = ocrCount;
            
            // Update progress bars
            const imageProgress = Math.min(100, imageCount * 10);
            const ocrProgress = Math.min(100, ocrCount * 10);
            
            document.getElementById('image-progress').style.width = `${imageProgress}%`;
            document.getElementById('ocr-progress').style.width = `${ocrProgress}%`;
            
            saveData();
        }

        // Render generation history
        function renderHistory() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            
            if (generationHistory.length === 0) {
                historyList.innerHTML = `
                    <div class="col-span-full text-center py-8 text-slate-500">
                        <i class="fas fa-history text-3xl mb-2"></i>
                        <p>No generation history yet</p>
                    </div>
                `;
                return;
            }
            
            generationHistory.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item glass-panel p-3 rounded-xl';
                historyItem.innerHTML = `
                    <img src="${item.url}" class="w-full h-24 object-cover rounded-lg mb-2" alt="Generated image" onerror="this.src='https://via.placeholder.com/300x200/1e293b/94a3b8?text=Image+Error'">
                    <p class="text-xs truncate" title="${item.prompt}">${item.prompt.substring(0, 30)}${item.prompt.length > 30 ? '...' : ''}</p>
                    <div class="flex justify-between items-center mt-1">
                        <span class="text-[10px] text-slate-500">${new Date(item.timestamp).toLocaleDateString()}</span>
                        <button onclick="loadHistoryItem(${index})" class="text-xs text-sky-400 hover:text-sky-300">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }

        // Render activity log
        function renderActivityLog() {
            const activityContainer = document.getElementById('activity-log');
            activityContainer.innerHTML = '';
            
            if (activityLog.length === 0) {
                activityContainer.innerHTML = `
                    <div class="text-center py-4 text-slate-500">
                        <i class="fas fa-clipboard-list text-xl mb-2"></i>
                        <p>No activity yet</p>
                    </div>
                `;
                return;
            }
            
            // Show only last 10 activities
            const recentActivities = activityLog.slice(-10).reverse();
            
            recentActivities.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'flex items-center gap-3 p-3 rounded-lg bg-slate-900/50';
                
                let icon = 'fas fa-info-circle';
                let color = 'text-sky-400';
                
                if (activity.type === 'success') {
                    icon = 'fas fa-check-circle';
                    color = 'text-green-400';
                } else if (activity.type === 'error') {
                    icon = 'fas fa-exclamation-circle';
                    color = 'text-red-400';
                } else if (activity.type === 'navigation') {
                    icon = 'fas fa-route';
                    color = 'text-purple-400';
                }
                
                activityItem.innerHTML = `
                    <i class="${icon} ${color}"></i>
                    <div class="flex-1">
                        <p class="text-sm">${activity.message}</p>
                        <p class="text-xs text-slate-500">${new Date(activity.timestamp).toLocaleTimeString()}</p>
                    </div>
                `;
                
                activityContainer.appendChild(activityItem);
            });
        }

        // Log activity
        function logActivity(message, type = "info") {
            activityLog.push({
                message: message,
                type: type,
                timestamp: new Date().toISOString()
            });
            
            // Keep only last 50 activities
            if (activityLog.length > 50) {
                activityLog = activityLog.slice(-50);
            }
            
            renderActivityLog();
            saveData();
        }

        // Copy OCR text to clipboard
        function copyOcrText() {
            const text = document.getElementById('ocrTextOutput').innerText;
            
            // Create a temporary textarea to copy the text
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            textarea.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast("Text copied to clipboard!", "success");
                    logActivity("OCR text copied to clipboard", "success");
                } else {
                    showToast("Failed to copy text", "error");
                }
            } catch (err) {
                console.error('Copy failed:', err);
                showToast("Failed to copy text", "error");
            }
            
            document.body.removeChild(textarea);
        }

        // Speak text using speech synthesis
        function speakText() {
            const text = document.getElementById('ocrTextOutput').innerText;
            
            if (!text.trim()) {
                showToast("No text to speak", "error");
                return;
            }
            
            if ('speechSynthesis' in window) {
                const speech = new SpeechSynthesisUtterance(text);
                speech.rate = 1.0;
                speech.pitch = 1.0;
                speech.volume = 1.0;
                
                window.speechSynthesis.speak(speech);
                showToast("Speaking text...", "success");
                logActivity("Text-to-speech activated", "info");
            } else {
                showToast("Speech synthesis not supported", "error");
            }
        }

        // Download generated image
        function downloadImage() {
            if (!currentImageData || !currentImageData.url) {
                showToast("No image to download", "error");
                return;
            }
            
            const link = document.createElement('a');
            link.href = currentImageData.url;
            link.download = `nexeo_${Date.now()}.jpg`;
            link.click();
            
            showToast("Image download started!", "success");
            logActivity("Image downloaded", "success");
        }

        // Regenerate image with same prompt
        function regenerateImage() {
            if (!currentImageData) {
                showToast("No previous image to regenerate", "error");
                return;
            }
            
            document.getElementById('promptInput').value = currentImageData.prompt;
            document.getElementById('styleSelect').value = currentImageData.style;
            document.getElementById('qualitySelect').value = currentImageData.quality;
            
            updatePromptCounter();
            handleImageGen();
        }

        // Share image
        function shareImage() {
            if (!currentImageData || !currentImageData.url) {
                showToast("No image to share", "error");
                return;
            }
            
            if (navigator.share) {
                navigator.share({
                    title: 'NEXEO AI Generated Image',
                    text: `Check out this AI-generated image: "${currentImageData.prompt}"`,
                    url: currentImageData.url
                }).then(() => {
                    logActivity("Image shared", "success");
                }).catch(() => {
                    // Share cancelled or failed
                });
            } else {
                copyImageURL();
                showToast("URL copied. Share it manually!", "success");
            }
        }

        // Analyze generated image with OCR
        function analyzeImageWithOCR() {
            if (!currentImageData || !currentImageData.url) {
                showToast("No image to analyze", "error");
                return;
            }
            
            // Switch to OCR section
            switchSection('ocr-reader');
            
            // Set the image URL in OCR input
            setTimeout(() => {
                document.getElementById('ocrLinkInput').value = currentImageData.url;
                handleOCR();
            }, 500);
        }

        // Translate text (placeholder function)
        function translateText() {
            showToast("Translation feature coming soon!", "info");
            logActivity("Translation requested", "info");
        }

        // Save OCR text as file
        function saveTextAsFile() {
            const text = document.getElementById('ocrTextOutput').innerText;
            
            if (!text.trim()) {
                showToast("No text to save", "error");
                return;
            }
            
            const blob = new Blob([text], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `nexeo_ocr_${Date.now()}.txt`;
            link.click();
            
            showToast("Text saved as file!", "success");
            logActivity("OCR text saved as file", "success");
        }

        // Load history item
        function loadHistoryItem(index) {
            const item = generationHistory[index];
            if (item) {
                document.getElementById('promptInput').value = item.prompt;
                document.getElementById('styleSelect').value = item.style || 'realistic';
                updatePromptCounter();
                
                showToast("Prompt loaded from history", "success");
                logActivity("Prompt loaded from history", "info");
            }
        }

        // Reset API endpoint
        function resetAPI() {
            document.getElementById('apiEndpoint').value = BASE_URL;
            showToast("API endpoint reset", "success");
            testAPI();
        }

        // Clear all data
        function clearAllData() {
            if (confirm("Are you sure you want to clear all data? This will reset counters and history.")) {
                imageCount = 0;
                ocrCount = 0;
                generationHistory = [];
                activityLog = [];
                currentImageData = null;
                currentOCRData = null;
                
                // Clear localStorage
                localStorage.clear();
                
                // Update UI
                updateStats();
                renderHistory();
                renderActivityLog();
                
                // Clear inputs
                clearPrompt();
                clearOCRInput();
                
                // Hide results
                document.getElementById('gen-result-container').classList.add('hidden');
                document.getElementById('ocr-result-box').classList.add('hidden');
                
                showToast("All data cleared", "success");
                logActivity("All data cleared", "info");
            }
        }

        // Export data (placeholder)
        function exportData() {
            showToast("Export feature coming soon!", "info");
            logActivity("Data export requested", "info");
        }

        // Toggle advanced mode (placeholder)
        function toggleAdvancedMode() {
            showToast("Advanced mode coming soon!", "info");
            logActivity("Advanced mode toggled", "info");
        }

        // Toggle theme dropdown
        function toggleThemeDropdown() {
            const dropdown = document.getElementById('themeDropdown');
            dropdown.classList.toggle('show');
        }

        // Change theme
        function changeTheme(themeName, showNotification = true) {
            // Remove all theme classes
            document.body.className = document.body.className.replace(/\btheme-\S+/g, '');
            
            // Add new theme class
            document.body.classList.add(`theme-${themeName}`);
            
            // Update active theme in dropdown
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const activeOption = document.querySelector(`.theme-option[onclick*="${themeName}"]`);
            if (activeOption) {
                activeOption.classList.add('active');
            }
            
            // Save theme preference
            localStorage.setItem('nexeo_theme', themeName);
            
            // Update theme button icon
            const themeButton = document.querySelector('.theme-selector button');
            const icons = {
                'default': 'fa-palette',
                'light': 'fa-sun',
                'neon-red': 'fa-fire',
                'neon-black': 'fa-moon',
                'neon-hacker': 'fa-terminal',
                'neon-anime': 'fa-gamepad',
                'neon-blue': 'fa-snowflake'
            };
            
            if (themeButton) {
                const iconElement = themeButton.querySelector('i');
                if (iconElement) {
                    iconElement.className = `fas ${icons[themeName] || 'fa-palette'}`;
                }
            }
            
            if (showNotification) {
                showToast(`Theme changed to ${themeName.replace('-', ' ')}`, "success");
                logActivity(`Theme changed to ${themeName}`, "info");
            }
        }

        // Show toast notification
        function showToast(message, type = "info") {
            const toastContainer = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            toast.className = `toast show ${type} glass-panel`;
            toast.innerHTML = `
                <div class="flex items-center gap-3">
                    <i class="fas ${type === 'success' ? 'fa-check-circle text-green-400' : type === 'error' ? 'fa-exclamation-circle text-red-400' : 'fa-info-circle text-sky-400'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
            
            // Limit to 3 toasts at a time
            const toasts = toastContainer.children;
            if (toasts.length > 3) {
                toasts[0].remove();
            }
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Prompt input events
            const promptInput = document.getElementById('promptInput');
            promptInput.addEventListener('input', updatePromptCounter);
            
            // OCR input events
            const ocrInput = document.getElementById('ocrLinkInput');
            ocrInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleOCR();
                }
            });
            
            // File input styling
            const fileInput = document.getElementById('fileInput');
            const fileLabel = fileInput.previousElementSibling;
            
            fileInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    fileLabel.innerHTML = `<i class="fas fa-check mr-2"></i>${this.files[0].name}`;
                }
            });
        });
    </script>
</body>
    </html>
